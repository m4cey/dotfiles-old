#!/bin/bash
$(xdotool key super+shift+r)
templates="${HOME}/.config/wal/templates"

source "${HOME}/.cache/wal/colors.sh"

ln -sf    "${HOME}/.cache/wal/xresources"    "${HOME}/.config/x11/xresources"
ln -sf    "${templates}/xresources"    "${HOME}/.config/x11/xresources_template"
xrdb "${HOME}/.config/x11/xresources"

alpha=$(xrdb -query | grep "alpha" | cut -f 2) #ALPHA
font="$(xrdb -query | grep "font" | cut -f 2)" #FONT
font="${font%%:*}"

#vconsole
sudo cp   "${HOME}/.cache/wal/vconsole.conf"    "/etc/vconsole.conf"
#dunst
ln -sf    "${HOME}/.cache/wal/dunstrc"    "${HOME}/.config/dunst/dunstrc"
ln -sf    "${templates}/dunstrc"    "${HOME}/.config/dunst/dunstrc_template"
#zathura
sed -i -E "s/ALPHA/${alpha}/" "${HOME}/.cache/wal/zathurarc"
ln -sf    "${HOME}/.cache/wal/zathurarc"    "${HOME}/.config/zathura/zathurarc"
ln -sf    "${templates}/zathurarc"    "${HOME}/.config/zathura/zathurarc_template"
#sioyek
sed -i -E "s/FONT/${font}/" "${HOME}/.cache/wal/prefs_user.config"
ln -sf    "${HOME}/.cache/wal/prefs_user.config"    "${HOME}/.config/sioyek/prefs_user.config"
ln -sf    "${templates}/prefs_user.config"    "${HOME}/.config/sioyek/prefs_user_template.config"
#picom
ln -sf    "${HOME}/.cache/wal/picom.conf"    "${HOME}/.config/picom.conf"
ln -sf    "${templates}/picom.conf"    "${HOME}/.config/picom_template.conf"
#nvim
ln -sf    "${HOME}/.cache/wal/color_overrides.lua"    "${HOME}/.config/nvim/lua/color_overrides.lua"
ln -sf    "${templates}/color_overrides.lua"    "${HOME}/.config/nvim/lua/color_overrides_template.lua"

pkill dunst; dunst &

pywalfox update
